

## 架构设计的宏观视角



### 为什么需要建立宏观视角？

如同造房子有建筑工人和建筑师一样，软件系统的开发过程同样需要有程序员和架构师，作为架构师，我们需要的第一个能力就是宏观的全局掌控能力。

如果把应用程序比作一座大厦，那么我们作为大厦的架构师，需要把大厦的结构搭建好，让程序员可以把砖填进去，我们都知道，一个大厦的结构建得是否稳固，与地基密不可分。

所以， 我们首先就需要从大厦的地基开始，熟悉这座大厦，毕竟，你对所依赖的基础架构了解得越全面，做业务架构就会越发从容。

介绍基础架构的知识点并不是让你真的去实现它们，但你仍然需要懂得它们的核心思想是什么，知道有哪些信息是你必须深刻理解的，以便可以更好的驾驭它们。



## 应用程序的基础架构

无论是什么样的智能电子设备，都可以称为电脑，所有的电脑都可以统一看作由"中央处理器+存储+一系列的输入输出设备"构成的。

中央处理器 - 负责按指令执行命令

存储 - 负责保存数据，包括我们要执行的命令



每次打开电脑的电源后，中央处理器都会从存储的某个固定位置处开始读入数据(也就是指令)，并且按指令执行命令，执行完一条指令就会继续执行下一条指令，电脑就这样开始工作了。

### 

### 电脑为什么可以完成这么多工作？



#### 一、可编程性

CPU的指令可以分为下面几类

- 计算类
- I/O类
- 指令跳转类

虽然CPU指令是一个有限的指令集，但CPU执行的指令序列并不是固定的，而是依赖保存在存储中的数据 — 由软件工程师编写的软件来决定，指令序列的可能性是无穷的，这也就意味着电脑能够做的事的可能性也是无穷的。



#### 二、开放设计的外部设备支持

虽然电脑可以连接很多种类的外部设备，但CPU并不理解这些设备具体有什么样的能力，它只和这些设备交换数据。它能够做的是从某个编号的设备(通常这个设备编号被称为端口)读入一段数据，或者向设备的端口写入一段数据。



可以看出，电脑的CPU是一个非常简洁的模型，它只读入和写出数据，对数据进行计算。

有了这个基础的计算机体系之后，我们就可以编写软件了。



#### 如何编写软件？

直接用机器语言编写软件太累，而且这些机器语言指令像天书一样没人看得懂，没法维护。所以编程语言和编译器出现了。

编译器把我们人类容易理解的语言，转换为机器可以理解的机器指令，这样一来就大大解放了编写软件的门槛。

多个软件在同一个电脑上怎么共处？这了解决这个问题，操作系统就出现了，它首先解决了软件治理的问题，其次解决了基础编程接口的问题。



今天开发软件的时候，已经处于一些基础的架构设计之中。基础架构解决的是与业务无关的一些通用问题，这些问题往往无论你具体要做什么样的应用都需要面对，而且，基础架构通常以独立的软件存在，所以也称为基础软件。

例如，我们熟悉的Linux，Nginx，MySQL，PHP等这些软件都属于基础软件，这些基础软件极大的降低了应用开发的难度。在今天软件服务化的大趋势下，很多基础软件最终以互联网服务的方式提供，这就是所谓的"云计算"。



## 完整的程序架构是怎样的？

在越强大的基础架构支撑下，应用程序开发需要关注的问题就越收敛，我们的开发效率就越高。

**在我们只需要关注应用程序本身的业务问题如何构建时，我们说自己是在设计应用程序的业务架构(或者叫应用架构)**

业务架构虽然会因为应用的领域不同而有很大的差异，但不同的业务架构之间，仍然会有许多共通的东西，它们不只遵循相同的架构原则，还可以遵循相同的设计范式。



#### 服务端

对一个服务端应用程序来说，其完整的架构体系大体如下

![](https://static001.geekbang.org/resource/image/55/37/5553453858eb86bf88a5623255f20037.png)



#### 客户端

对于客户端程序来说，首先面临的是多样性挑战，单就操作系统来说，PC就有Windows，Mac，Linux等数十种，手机也有Andriod，iOS等，而设备种类就更多了。

第一个想消除客户端多样性，并且跨平台提供统一编程接口的，是浏览器。浏览器的地位非常特殊，可以看作是操作系统之上的操作系统，浏览器是一个基础软件。



对一个客户端应用程序来说，其完整的架构体系大体如下



![](https://static001.geekbang.org/resource/image/3a/c7/3af7a4830566a5b3e1058f409422b7c7.png)





## 结语

如果把写代码的能力比作武功招式，那么架构能力就好比内功，内功修炼好了，武功招式的运用才能得心应手。



#### ***而架构能力的提升，本质上是对你的知识脉络的反复梳理与融会贯通的过程。***



具备架构思维并不难，而且极有必要，不管今天的你是不是团队里的一位架构师，对任何一位程序员来说，具备架构思维将会成为你脱颖而出的关键。

